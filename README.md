# WZ Garry Bot ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã, –ø–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —ç—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –¥–ª—è Telegram-–±–æ—Ç–∞ WZ Garry Bot (RU-only compliant).
## –°–æ—Å—Ç–∞–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- `docs/` ‚Äî —É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ (–≤ —Ç.—á. –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å v1.5.7)
- `stages/` ‚Äî —ç—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–∏–Ω—Ñ—Ä–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Ç–µ—Å—Ç—ã, –∞—É–¥–∏—Ç, —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ)
- `scripts/` ‚Äî —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Ç.–ø.)
- `db/`, `redis/`, `nginx/`, `lua/`, `src/` ‚Äî –∫–∞—Ç–∞–ª–æ–≥–∏ –ø–æ–¥ –∫–æ–¥/–∫–æ–Ω—Ñ–∏–≥–∏ (–±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –°–æ–∑–¥–∞–π `.env` (–ª–æ–∫–∞–ª—å–Ω–æ, –Ω–µ –∫–æ–º–º–∏—Ç—å): `cp .env.example .env` –∏ –∑–∞–ø–æ–ª–Ω–∏ —Å–µ–∫—Ä–µ—Ç—ã.
2. –ó–∞–ø—É—Å—Ç–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ Docker Compose.
3. –ü—Ä–æ–≤–µ—Ä—å `/health` –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞.
## –ü–æ–ª–µ–∑–Ω–æ–µ
- –ü–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: `docs/security_plan_v1.5.7.md`
- –ß–µ–∫-–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è: `stages/01_infra_setup.md`

---

## üîê –ö–æ–º–º–∏—Ç—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**1. Husky-—Ö—É–∫–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º):**
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ–±—ã –Ω–µ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å `.env`, `.enc` –∏ –∫–ª—é—á–∏.
- –ò—â—É—Ç —Ç–æ–∫–µ–Ω—ã (`TOKEN_PLACEHOLDER=<–ø—Ä–∏–º–µ—Ä>`).
- –ó–∞–ø—É—Å–∫–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–¥–∞ —á–µ—Ä–µ–∑ ESLint.
- –î–æ–±–∞–≤–ª—è—é—Ç –ø–æ–¥–ø–∏—Å—å –∞–≤—Ç–æ—Ä–∞.

**2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å**
–ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–æ–∫—É:

Signed-off-by: jaCKdaniels ü•É jaCKdaniels@AgeToPerfect.ion

**3. –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫**
–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ö—É–∫–æ–≤ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `/root/wz-garry-bot/.husky.log`.  
–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏:
```bash
tail -n 20 /root/wz-garry-bot/.husky.log

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ ESLint –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JS.
–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

npx eslint . --ext .js

5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ù–µ –∫–æ–º–º–∏—Ç—å .env –∏ –¥—Ä—É–≥–∏–µ —Å–µ–∫—Ä–µ—Ç—ã.

–í—Å–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ.

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.



---

## üõ°Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

### üîê Husky ‚Äî –∑–∞—â–∏—Ç–∞ –∫–æ–º–º–∏—Ç–æ–≤
Husky –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º `git commit` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–æ–∫:
- üö´ –ù–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–º–∏—Ç `.env`, `.enc` –∏ –∫–ª—é—á–µ–π (`keys.txt`)
- ‚ö†Ô∏è –ò—â–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä `TOKEN=`) —Ç–æ–ª—å–∫–æ –≤ **–Ω–µ-Markdown —Ñ–∞–π–ª–∞—Ö**
- üßπ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é `ESLint`
- üß™ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úçÔ∏è –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å—å `Signed-off-by: jaCKdaniels ü•É <jaCKdaniels@AgeToPerfect.ion>`

–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã —Ç–æ–∫–µ–Ω—ã ‚Äî –∫–æ–º–º–∏—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.  
–ï—Å–ª–∏ –≤—Å—ë —á–∏—Å—Ç–æ ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

### üß† ESLint ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
ESLint —Å–ª–µ–¥–∏—Ç –∑–∞ —á–∏—Å—Ç–æ—Ç–æ–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JavaScript:
```bash
npx eslint . --ext .js

–û—à–∏–±–∫–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º, –∏–Ω–∞—á–µ Husky –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.


---

üß± PM2 ‚Äî –ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ PM2:

pm2 status
pm2 logs wz-garry
pm2 restart wz-garry

PM2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –ø—Ä–∏ —Å–±–æ–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.


---

üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ SOPS

–§–∞–π–ª deploy/.env.prod.enc —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
–î–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á:

/root/.config/sops/age/keys.txt

–ö–æ–º–∞–Ω–¥–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏:

export SOPS_AGE_KEY_FILE=~/.config/sops/age/keys.txt
sops -d deploy/.env.prod.enc > .env


---

‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π Dev Flow

1. npm run lint        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
2. git add . && git commit -m "fix: ..."   # Husky –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
3. git push origin main                   # –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤ GitHub
4. pm2 restart wz-garry                   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞


---

## üß© CI/CD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è WZ Garry Bot

### üöÄ GitHub Actions (–∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –Ω–∞ VPS)
–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –≤ –≤–µ—Ç–∫—É `main` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è workflow `.github/workflows/deploy.yml`. –û–Ω –¥–µ–ª–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π –∫–æ–¥–∞ –Ω–∞ VPS –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ —á–µ—Ä–µ–∑ PM2.

#### üîê –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π CI/CD (—è–¥—Ä–æ workflow)
```yaml
- name: üîê Deploy via SSH
  uses: appleboy/ssh-action@v1.2.0
  with:
    host: \${{ secrets.VPS_HOST }}
    username: \${{ secrets.VPS_USER }}
    key: \${{ secrets.VPS_SSH_KEY }}
    script: |
      set -e
      cd /root/wz-garry-bot && \
      git fetch origin main && \
      git reset --hard origin/main && \
      pm2 describe wz-garry >/dev/null 2>&1 && \
      pm2 restart wz-garry || pm2 start src/index.js --name wz-garry && \
      pm2 save

üì£ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram (—Å–µ–∫—Ä–µ—Ç—ã TG_BOT_TOKEN, TG_CHAT_ID):

‚úÖ WZ Garry Bot deployed to VPS

–ü—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç ‚ùå-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–æ—Å—å–±–æ–π –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ Actions.


---

üß† –õ–æ–≥–∏–∫–∞ –¥–µ–ø–ª–æ—è

1. GitHub Actions –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VPS –ø–æ SSH —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º (—Å–µ–∫—Ä–µ—Ç VPS_SSH_KEY).


2. –í –∫–∞—Ç–∞–ª–æ–≥–µ /root/wz-garry-bot –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ–¥: git fetch ‚Üí git reset --hard origin/main.


3. –ü—Ä–æ—Ü–µ—Å—Å PM2 wz-garry –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (–∏–ª–∏ —Å—Ç–∞—Ä—Ç—É–µ—Ç, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ –±—ã–ª–æ).


4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (pm2 save) –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥—ä—ë–º–∞ –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞.




---

üîÑ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è –∏–∑ Termux

–ó–∞–ø—É—Å—Ç–∏—Ç—å workflow –±–µ–∑ –∫–æ–º–º–∏—Ç–∞:

gh workflow run "üöÄ Deploy to VPS"

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤:

gh run list --workflow="deploy.yml"

–ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞:

gh run view $(gh run list --workflow="deploy.yml" --json databaseId --jq ".[0].databaseId") --log


---

üíª –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–æ—Ç–∞ –Ω–∞ VPS

–°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞:

ssh root@89.111.171.170 "pm2 status wz-garry"

–ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤:

ssh root@89.111.171.170 "pm2 logs wz-garry --lines 30 --timestamp"

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞ (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):

ssh root@89.111.171.170 'cd /root/wz-garry-bot && . ./.env && curl -s "https://api.telegram.org/bot${TOKEN}/getMe"'


---

üì± –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å Android (Termux)

–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å CI/CD –∏ –ª–æ–≥–æ–≤ ‚Äî –±–µ–∑ –≤—Ö–æ–¥–∞ –Ω–∞ VPS.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

pkg update && pkg upgrade -y
pkg install git nodejs openssh gh -y

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ GitHub CLI:

gh auth login

–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

git clone git@github.com:Skladkoles44/wz-garry-bot.git ~/wz-garry-bot
cd ~/wz-garry-bot


---

üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

.env –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è (–ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç Husky).

–°–µ–∫—Ä–µ—Ç—ã GitHub Actions:

VPS_HOST ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

VPS_USER ‚Äî SSH-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

VPS_SSH_KEY ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –¥–µ–ø–ª–æ—è

TG_BOT_TOKEN ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞

TG_CHAT_ID ‚Äî ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π



> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ README –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –Ω–µ—Ç —Å—Ç—Ä–æ–∫ –≤–∏–¥–∞ TOKEN= –∏ —è–≤–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ ‚Äî —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å –∑–∞—â–∏—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ Husky.




---

## üß© CI/CD –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è WZ Garry Bot

### üöÄ GitHub Actions (–∞–≤—Ç–æ–¥–µ–ø–ª–æ–π –Ω–∞ VPS)
–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –≤ –≤–µ—Ç–∫—É `main` –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è workflow `.github/workflows/deploy.yml`. –û–Ω –¥–µ–ª–∞–µ—Ç –ø–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π –∫–æ–¥–∞ –Ω–∞ VPS –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ —á–µ—Ä–µ–∑ PM2.

#### üîê –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π CI/CD (—è–¥—Ä–æ workflow)
```yaml
- name: üîê Deploy via SSH
  uses: appleboy/ssh-action@v1.2.0
  with:
    host: \${{ secrets.VPS_HOST }}
    username: \${{ secrets.VPS_USER }}
    key: \${{ secrets.VPS_SSH_KEY }}
    script: |
      set -e
      cd /root/wz-garry-bot && \
      git fetch origin main && \
      git reset --hard origin/main && \
      pm2 describe wz-garry >/dev/null 2>&1 && \
      pm2 restart wz-garry || pm2 start src/index.js --name wz-garry && \
      pm2 save

üì£ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram (—Å–µ–∫—Ä–µ—Ç—ã TG_BOT_TOKEN, TG_CHAT_ID):

‚úÖ WZ Garry Bot deployed to VPS

–ü—Ä–∏ –æ—à–∏–±–∫–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç ‚ùå-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–æ—Å—å–±–æ–π –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ Actions.


---

üß† –õ–æ–≥–∏–∫–∞ –¥–µ–ø–ª–æ—è

1. GitHub Actions –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ VPS –ø–æ SSH —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∫–ª—é—á–æ–º (—Å–µ–∫—Ä–µ—Ç VPS_SSH_KEY).


2. –í –∫–∞—Ç–∞–ª–æ–≥–µ /root/wz-garry-bot –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–æ–¥: git fetch ‚Üí git reset --hard origin/main.


3. –ü—Ä–æ—Ü–µ—Å—Å PM2 wz-garry –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (–∏–ª–∏ —Å—Ç–∞—Ä—Ç—É–µ—Ç, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ –±—ã–ª–æ).


4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PM2 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (pm2 save) –¥–ª—è –∞–≤—Ç–æ–ø–æ–¥—ä—ë–º–∞ –ø–æ—Å–ª–µ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞.




---

üîÑ –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –¥–µ–ø–ª–æ—è –∏–∑ Termux

–ó–∞–ø—É—Å—Ç–∏—Ç—å workflow –±–µ–∑ –∫–æ–º–º–∏—Ç–∞:

gh workflow run "üöÄ Deploy to VPS"

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø—Ä–æ–≥–æ–Ω–æ–≤:

gh run list --workflow="deploy.yml"

–ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–æ–≥–æ–Ω–∞:

gh run view $(gh run list --workflow="deploy.yml" --json databaseId --jq ".[0].databaseId") --log


---

üíª –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–æ—Ç–∞ –Ω–∞ VPS

–°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞:

ssh root@89.111.171.170 "pm2 status wz-garry"

–ü–æ—Å–ª–µ–¥–Ω–∏–µ 30 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤:

ssh root@89.111.171.170 "pm2 logs wz-garry --lines 30 --timestamp"

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞ (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É–∂–µ –ø–æ–¥—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ):

ssh root@89.111.171.170 'cd /root/wz-garry-bot && . ./.env && curl -s "https://api.telegram.org/bot${TOKEN}/getMe"'


---

üì± –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å Android (Termux)

–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å CI/CD –∏ –ª–æ–≥–æ–≤ ‚Äî –±–µ–∑ –≤—Ö–æ–¥–∞ –Ω–∞ VPS.

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

pkg update && pkg upgrade -y
pkg install git nodejs openssh gh -y

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ GitHub CLI:

gh auth login

–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

git clone git@github.com:Skladkoles44/wz-garry-bot.git ~/wz-garry-bot
cd ~/wz-garry-bot


---

üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

.env –Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è (–ø—Ä–µ–ø—è—Ç—Å—Ç–≤—É–µ—Ç Husky).

–°–µ–∫—Ä–µ—Ç—ã GitHub Actions:

VPS_HOST ‚Äî –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞

VPS_USER ‚Äî SSH-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

VPS_SSH_KEY ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –¥–µ–ø–ª–æ—è

TG_BOT_TOKEN ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞

TG_CHAT_ID ‚Äî ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π



> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ README –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –Ω–µ—Ç —Å—Ç—Ä–æ–∫ –≤–∏–¥–∞ TOKEN= –∏ —è–≤–Ω—ã—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ ‚Äî —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å –∑–∞—â–∏—Ç–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ Husky.



