# WZ Garry Bot ‚Äî –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã, –ø–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ —ç—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –¥–ª—è Telegram-–±–æ—Ç–∞ WZ Garry Bot (RU-only compliant).
## –°–æ—Å—Ç–∞–≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- `docs/` ‚Äî —É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã –∏ –ø–æ–ª–∏—Ç–∏–∫–∏ (–≤ —Ç.—á. –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å v1.5.7)
- `stages/` ‚Äî —ç—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è (–∏–Ω—Ñ—Ä–∞, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Ç–µ—Å—Ç—ã, –∞—É–¥–∏—Ç, —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ)
- `scripts/` ‚Äî —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Ç.–ø.)
- `db/`, `redis/`, `nginx/`, `lua/`, `src/` ‚Äî –∫–∞—Ç–∞–ª–æ–≥–∏ –ø–æ–¥ –∫–æ–¥/–∫–æ–Ω—Ñ–∏–≥–∏ (–±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
1. –°–æ–∑–¥–∞–π `.env` (–ª–æ–∫–∞–ª—å–Ω–æ, –Ω–µ –∫–æ–º–º–∏—Ç—å): `cp .env.example .env` –∏ –∑–∞–ø–æ–ª–Ω–∏ —Å–µ–∫—Ä–µ—Ç—ã.
2. –ó–∞–ø—É—Å—Ç–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ—Ä–µ–∑ Docker Compose.
3. –ü—Ä–æ–≤–µ—Ä—å `/health` –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–æ—Ç–∞.
## –ü–æ–ª–µ–∑–Ω–æ–µ
- –ü–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏: `docs/security_plan_v1.5.7.md`
- –ß–µ–∫-–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è: `stages/01_infra_setup.md`

---

## üîê –ö–æ–º–º–∏—Ç—ã –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**1. Husky-—Ö—É–∫–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º):**
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ–±—ã –Ω–µ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å `.env`, `.enc` –∏ –∫–ª—é—á–∏.
- –ò—â—É—Ç —Ç–æ–∫–µ–Ω—ã (`TOKEN_PLACEHOLDER=<–ø—Ä–∏–º–µ—Ä>`).
- –ó–∞–ø—É—Å–∫–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–¥–∞ —á–µ—Ä–µ–∑ ESLint.
- –î–æ–±–∞–≤–ª—è—é—Ç –ø–æ–¥–ø–∏—Å—å –∞–≤—Ç–æ—Ä–∞.

**2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å—å**
–ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç—Ä–æ–∫—É:

Signed-off-by: jaCKdaniels ü•É jaCKdaniels@AgeToPerfect.ion

**3. –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫**
–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ö—É–∫–æ–≤ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `/root/wz-garry-bot/.husky.log`.  
–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏:
```bash
tail -n 20 /root/wz-garry-bot/.husky.log

4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ ESLint –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JS.
–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é:

npx eslint . --ext .js

5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ù–µ –∫–æ–º–º–∏—Ç—å .env –∏ –¥—Ä—É–≥–∏–µ —Å–µ–∫—Ä–µ—Ç—ã.

–í—Å–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ.

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–ø–∞–¥–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.



---

## üõ°Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞–≤—Ç–æ–ø—Ä–æ–≤–µ—Ä–∫–∏

### üîê Husky ‚Äî –∑–∞—â–∏—Ç–∞ –∫–æ–º–º–∏—Ç–æ–≤
Husky –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º `git commit` –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–æ–∫:
- üö´ –ù–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç –∫–æ–º–º–∏—Ç `.env`, `.enc` –∏ –∫–ª—é—á–µ–π (`keys.txt`)
- ‚ö†Ô∏è –ò—â–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä `TOKEN=`) —Ç–æ–ª—å–∫–æ –≤ **–Ω–µ-Markdown —Ñ–∞–π–ª–∞—Ö**
- üßπ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–¥ —Å –ø–æ–º–æ—â—å—é `ESLint`
- üß™ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚úçÔ∏è –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–ø–∏—Å—å `Signed-off-by: jaCKdaniels ü•É <jaCKdaniels@AgeToPerfect.ion>`

–ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã —Ç–æ–∫–µ–Ω—ã ‚Äî –∫–æ–º–º–∏—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.  
–ï—Å–ª–∏ –≤—Å—ë —á–∏—Å—Ç–æ ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ö–æ–¥—è—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

### üß† ESLint ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
ESLint —Å–ª–µ–¥–∏—Ç –∑–∞ —á–∏—Å—Ç–æ—Ç–æ–π –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JavaScript:
```bash
npx eslint . --ext .js

–û—à–∏–±–∫–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º, –∏–Ω–∞—á–µ Husky –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.


---

üß± PM2 ‚Äî –ø—Ä–æ—Ü–µ—Å—Å-–º–µ–Ω–µ–¥–∂–µ—Ä

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ PM2:

pm2 status
pm2 logs wz-garry
pm2 restart wz-garry

PM2 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞ –ø—Ä–∏ —Å–±–æ–µ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞.


---

üîí –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ SOPS

–§–∞–π–ª deploy/.env.prod.enc —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.
–î–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á:

/root/.config/sops/age/keys.txt

–ö–æ–º–∞–Ω–¥–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏:

export SOPS_AGE_KEY_FILE=~/.config/sops/age/keys.txt
sops -d deploy/.env.prod.enc > .env


---

‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π Dev Flow

1. npm run lint        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
2. git add . && git commit -m "fix: ..."   # Husky –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
3. git push origin main                   # –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤ GitHub
4. pm2 restart wz-garry                   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞

