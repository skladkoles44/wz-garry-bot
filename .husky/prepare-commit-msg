#!/bin/sh
LOG="/root/wz-garry-bot/.husky.log"
TS() { date -Iseconds; }

MSG_FILE="$1"
SIGNED_OFF="Signed-off-by: jaCKdaniels ðŸ¥ƒ <jaCKdaniels@AgeToPerfect.ion>"

echo "[$(TS)] prepare-commit-msg started for $MSG_FILE" >> "$LOG"

# Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒ ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ â€” Ð²Ñ‹Ñ…Ð¾Ð´Ð¸Ð¼
if grep -qF "$SIGNED_OFF" "$MSG_FILE"; then
  echo "[$(TS)] signature already present, skipping" >> "$LOG"
  exit 0
fi

# Ð˜Ð½Ð°Ñ‡Ðµ Ð´Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑŒ Ð² ÐºÐ¾Ð½ÐµÑ†
printf "\n%s\n" "$SIGNED_OFF" >> "$MSG_FILE"
echo "[$(TS)] signature appended" >> "$LOG"
